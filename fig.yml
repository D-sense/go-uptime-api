mongo:
  image: mongo:2.6

local:
  build: .
  command: gin
  ports:
    - 3000
  volumes:
    - .:/go/src/github.com/maxcnunes/monitor-api
    - /var/run/docker.sock:/tmp/docker.sock
  environment:
    MONGODB_DATABASE: monitor-api
    VIRTUAL_PORT: 3000
    VIRTUAL_HOST: monitor-service.local.dockito.org
    PORT_BEHIND_PROXY: 3001
    CHECK_TARGETS_AT_EVERY: 1m # 1 minute
  links:
    - mongo:mongo
